'use strict';(function(a,b,c){b.behaviors.toc={attach:function attach(b){function d(a){return j.some(function(b){return b===a})}function e(a){return a.toLowerCase().replace(/\s+/g,'-').replace(/[^\w\-]+/g,'').replace(/\-\-+/g,'-').replace(/^-+/,'').replace(/-+$/,'')}function f(){void 0!==i.css('padding-left')&&(g=parseInt(i.css('padding-left'),10)),i.width(m.width()-2*g)}var g,h=['h2:not(.component__teaser-list *)','h3:not(.component__teaser-list *)'],j=[],k=[];a.fn.visible=function(b){var c=a(this),d=a(window),e=d.scrollTop(),f=e+d.height(),g=c.offset().top,h=g+c.height(),i=!0===b?h:g,j=!0===b?g:h;return j<=f&&i>=e};var i=a('.js-toc.toc--not-ready',b),l=a('.js-toc-source',b).first(),m=i.parent();if(f(),l.find(h.join(', ')).each(function(b){var c=a(this),f=e(c.text());d(f)&&(f=f+'-'+b),j.push(f),k.push(c),c.attr('id',f)}),a('.toc__inner',i).toc({noBackToTopLinks:!0,title:'',minimumHeaders:2,headers:h.map(function(a){return'.js-toc-source '+a}).join(', '),classes:{list:'toc__list',item:'toc__item'}}),0===i.find('.toc__item--active').length&&i.find('.toc__item').first().addClass('toc__item--active'),0<i.find('.toc__item').length){i.removeClass('toc--not-ready');var n=i.offset().top,o=i.height(),p=l.offset().top,q=l.height(),r=setInterval(function(){var a=i.height();a>o&&(o=a,n=i.position().top,clearInterval(r))},1e3);window.addEventListener('scroll',function(){var b=a('html').scrollTop()||a('body').scrollTop();n<b?i.addClass('toc--fixed'):i.removeClass('toc--fixed');var c=p+q-o-25<b;c?i.addClass('toc--stuck-to-bottom'):i.removeClass('toc--stuck-to-bottom')}),window.addEventListener('scroll',c.debounce(function(){k.every(function(a){return!a.visible()||(i.find('.toc__item--active').removeClass('toc__item--active'),i.find('a[href="#'+a.attr('id')+'"]').parent().addClass('toc__item--active'),!1)})},100)),window.addEventListener('resize',c.debounce(f,10))}}}})(jQuery,Drupal,_);
//# sourceMappingURL=toc.js.map
